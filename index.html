<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>nvector-geodesy</title><meta name="description" content="Documentation for nvector-geodesy"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://github.com/ezzatron/nvector-js">GitHub</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">nvector-geodesy</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>nvector-geodesy</h2></div><div class="tsd-panel tsd-typography"><a id="md:n-vector" class="tsd-anchor"></a><h1 class="tsd-anchor-link"><em>n</em>-vector<a href="#md:n-vector" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><em>Functions for performing geographical position calculations using n-vectors</em></p>
<p><a href="https://npmjs.com/package/nvector-geodesy" target="_blank" class="external"><img src="https://img.shields.io/npm/v/nvector-geodesy?label=nvector-geodesy&amp;logo=npm&amp;style=for-the-badge" alt="Current NPM version"></a>
<a href="https://jsr.io/@ezzatron/nvector" target="_blank" class="external"><img src="https://jsr.io/badges/@ezzatron/nvector?label=@ezzatron/nvector&amp;style=for-the-badge" alt="Current JSR version"></a>
<a href="https://github.com/ezzatron/nvector-js/actions/workflows/ci.yml" target="_blank" class="external"><img src="https://img.shields.io/github/actions/workflow/status/ezzatron/nvector-js/ci.yml?branch=main&amp;style=for-the-badge" alt="Build status"></a>
<a href="https://codecov.io/gh/ezzatron/nvector-js" target="_blank" class="external"><img src="https://img.shields.io/codecov/c/gh/ezzatron/nvector-js?style=for-the-badge" alt="Test coverage"></a></p>
<p>This library is a lightweight (&lt;2kB), dependency-free port of the <a href="https://github.com/FFI-no/n-vector" target="_blank" class="external">Matlab
n-vector library</a> by <a href="https://github.com/KennethGade" target="_blank" class="external">Kenneth Gade</a>. All original functions are included,
although the names of the functions and arguments have been changed in an
attempt to clarify their purpose. In addition, this library includes some extra
functions for vector and matrix operations needed to solve the <a href="https://www.ffi.no/en/research/n-vector" target="_blank" class="external">10 examples from
the n-vector page</a>.</p>
<p>See the <a href="https://ezzatron.com/nvector-js" target="_blank" class="external">reference documentation</a> for a list of all functions and their
signatures.</p>
<a id="md:installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="sh"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">nvector-geodesy</span>
</code><button type="button">Copy</button></pre>

<a id="md:examples" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Examples<a href="#md:examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The following sections show the <a href="https://www.ffi.no/en/research/n-vector" target="_blank" class="external">10 examples from the n-vector page</a> implemented
using this library.</p>
<a id="md:example-1-a-and-b-to-delta" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 1: A and B to delta<a href="#md:example-1-a-and-b-to-delta" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-01.png" alt="Illustration of example 1"></p>
<blockquote>
<p>Given two positions <em>A</em> and <em>B</em>. Find the exact vector from <em>A</em> to <em>B</em> in
meters north, east and down, and find the direction (azimuth/bearing) to <em>B</em>,
relative to north. Use WGS-84 ellipsoid.</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_1" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_1</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">delta</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fromGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">radians</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">toRotationMatrix</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">transform</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">transpose</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 1: A and B to delta</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given two positions A and B. Find the exact vector from A to B in meters</span><br/><span class="hl-5"> * north, east and down, and find the direction (azimuth/bearing) to B, relative</span><br/><span class="hl-5"> * to north. Use WGS-84 ellipsoid.</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_1</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 1&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Given two positions, A and B as latitudes, longitudes and depths (relative</span><br/><span class="hl-1">  </span><span class="hl-5">// to Earth, E):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">aLat</span><span class="hl-1"> = </span><span class="hl-8">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">aLon</span><span class="hl-1"> = </span><span class="hl-8">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">aDepth</span><span class="hl-1"> = </span><span class="hl-8">3</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bLat</span><span class="hl-1"> = </span><span class="hl-8">4</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">bLon</span><span class="hl-1"> = </span><span class="hl-8">5</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">bDepth</span><span class="hl-1"> = </span><span class="hl-8">6</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the exact vector between the two positions, given in meters north,</span><br/><span class="hl-1">  </span><span class="hl-5">// east, and down, and find the direction (azimuth) to B, relative to north.</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// Details:</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// - Assume WGS-84 ellipsoid. The given depths are from the ellipsoid surface.</span><br/><span class="hl-1">  </span><span class="hl-5">// - Use position A to define north, east, and down directions. (Due to the</span><br/><span class="hl-1">  </span><span class="hl-5">//   curvature of Earth and different directions to the North Pole, the north,</span><br/><span class="hl-1">  </span><span class="hl-5">//   east, and down directions will change (relative to Earth) for different</span><br/><span class="hl-1">  </span><span class="hl-5">//   places. Position A must be outside the poles for the north and east</span><br/><span class="hl-1">  </span><span class="hl-5">//   directions to be defined.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 1</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// First, the given latitudes and longitudes are converted to n-vectors:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">a</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-4">aLon</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-4">aLat</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">b</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-4">bLon</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-4">bLat</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 2</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// When the positions are given as n-vectors (and depths), it is easy to find</span><br/><span class="hl-1">  </span><span class="hl-5">// the delta vector decomposed in E. No ellipsoid is specified when calling</span><br/><span class="hl-1">  </span><span class="hl-5">// the function, thus WGS-84 (default) is used:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">abE</span><span class="hl-1"> = </span><span class="hl-0">delta</span><span class="hl-1">(</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">, </span><span class="hl-4">aDepth</span><span class="hl-1">, </span><span class="hl-4">bDepth</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 3</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// We now have the delta vector from A to B, but the three coordinates of the</span><br/><span class="hl-1">  </span><span class="hl-5">// vector are along the Earth coordinate frame E, while we need the</span><br/><span class="hl-1">  </span><span class="hl-5">// coordinates to be north, east and down. To get this, we define a</span><br/><span class="hl-1">  </span><span class="hl-5">// North-East-Down coordinate frame called N, and then we need the rotation</span><br/><span class="hl-1">  </span><span class="hl-5">// matrix (direction cosine matrix) rEN to go between E and N. We have a</span><br/><span class="hl-1">  </span><span class="hl-5">// simple function that calculates rEN from an n-vector, and we use this</span><br/><span class="hl-1">  </span><span class="hl-5">// function (using the n-vector at position A):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">rEN</span><span class="hl-1"> = </span><span class="hl-0">toRotationMatrix</span><span class="hl-1">(</span><span class="hl-4">a</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 4</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// Now the delta vector is easily decomposed in N. Since the vector is</span><br/><span class="hl-1">  </span><span class="hl-5">// decomposed in E, we must use rNE (rNE is the transpose of rEN):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">abN</span><span class="hl-1"> = </span><span class="hl-0">transform</span><span class="hl-1">(</span><span class="hl-0">transpose</span><span class="hl-1">(</span><span class="hl-4">rEN</span><span class="hl-1">), </span><span class="hl-4">abE</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 5</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// The three components of abN are the north, east and down displacements from</span><br/><span class="hl-1">  </span><span class="hl-5">// A to B in meters. The azimuth is simply found from element 1 and 2 of the</span><br/><span class="hl-1">  </span><span class="hl-5">// vector (the north and east components):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">azimuth</span><span class="hl-1"> = </span><span class="hl-4">Math</span><span class="hl-1">.</span><span class="hl-0">atan2</span><span class="hl-1">(</span><span class="hl-4">abN</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">], </span><span class="hl-4">abN</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">abN</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">]).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">331730.2347808944</span><span class="hl-1">, </span><span class="hl-8">8</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">abN</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">]).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">332997.8749892695</span><span class="hl-1">, </span><span class="hl-8">8</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">abN</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">]).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">17404.27136193635</span><span class="hl-1">, </span><span class="hl-8">8</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">azimuth</span><span class="hl-1">).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">45.10926323826139</span><span class="hl-1">), </span><span class="hl-8">15</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:example-2-b-and-delta-to-c" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 2: B and delta to C<a href="#md:example-2-b-and-delta-to-c" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-02.png" alt="Illustration of example 2"></p>
<blockquote>
<p>Given the position of vehicle <em>B</em> and a bearing and distance to an object <em>C</em>.
Find the exact position of <em>C</em>. Use WGS-72 ellipsoid.</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_2" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_2</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">WGS_72</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">degrees</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">destination</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">eulerZYXToRotationMatrix</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">multiply</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">normalize</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">radians</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">toGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">toRotationMatrix</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">transform</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-4">Vector</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 2: B and delta to C</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given the position of vehicle B and a bearing and distance to an object C.</span><br/><span class="hl-5"> * Find the exact position of C. Use WGS-72 ellipsoid.</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_2</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 2&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// A radar or sonar attached to a vehicle B (Body coordinate frame) measures</span><br/><span class="hl-1">  </span><span class="hl-5">// the distance and direction to an object C. We assume that the distance and</span><br/><span class="hl-1">  </span><span class="hl-5">// two angles measured by the sensor (typically bearing and elevation relative</span><br/><span class="hl-1">  </span><span class="hl-5">// to B) are already converted (by converting from spherical to Cartesian</span><br/><span class="hl-1">  </span><span class="hl-5">// coordinates) to the vector bcB (i.e. the vector from B to C, decomposed in</span><br/><span class="hl-1">  </span><span class="hl-5">// B):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bcB</span><span class="hl-1">: </span><span class="hl-9">Vector</span><span class="hl-1"> = [</span><span class="hl-8">3000</span><span class="hl-1">, </span><span class="hl-8">2000</span><span class="hl-1">, </span><span class="hl-8">100</span><span class="hl-1">];</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// The position of B is given as an n-vector and a depth:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">b</span><span class="hl-1"> = </span><span class="hl-0">normalize</span><span class="hl-1">([</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">, </span><span class="hl-8">3</span><span class="hl-1">]);</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bDepth</span><span class="hl-1"> = -</span><span class="hl-8">400</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// The orientation (attitude) of B is given as rNB, specified as yaw, pitch,</span><br/><span class="hl-1">  </span><span class="hl-5">// roll:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">rNB</span><span class="hl-1"> = </span><span class="hl-0">eulerZYXToRotationMatrix</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">10</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">20</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">30</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Use the WGS-72 ellipsoid:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">e</span><span class="hl-1"> = </span><span class="hl-7">WGS_72</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the exact position of object C as an n-vector and a depth.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 1</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// The delta vector is given in B. It should be decomposed in E before using</span><br/><span class="hl-1">  </span><span class="hl-5">// it, and thus we need rEB. This matrix is found from the matrices rEN and</span><br/><span class="hl-1">  </span><span class="hl-5">// rNB, and we need to find rEN, as in Example 1:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">rEN</span><span class="hl-1"> = </span><span class="hl-0">toRotationMatrix</span><span class="hl-1">(</span><span class="hl-4">b</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 2</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// Now, we can find rEB y using that the closest frames cancel when</span><br/><span class="hl-1">  </span><span class="hl-5">// multiplying two rotation matrices (i.e. N is cancelled here):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">rEB</span><span class="hl-1"> = </span><span class="hl-0">multiply</span><span class="hl-1">(</span><span class="hl-4">rEN</span><span class="hl-1">, </span><span class="hl-4">rNB</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 3</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// The delta vector is now decomposed in E:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bcE</span><span class="hl-1"> = </span><span class="hl-0">transform</span><span class="hl-1">(</span><span class="hl-4">rEB</span><span class="hl-1">, </span><span class="hl-4">bcB</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 4</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// It is now easy to find the position of C using destination (with custom</span><br/><span class="hl-1">  </span><span class="hl-5">// ellipsoid overriding the default WGS-84):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> [</span><span class="hl-7">c</span><span class="hl-1">, </span><span class="hl-7">cDepth</span><span class="hl-1">] = </span><span class="hl-0">destination</span><span class="hl-1">(</span><span class="hl-4">b</span><span class="hl-1">, </span><span class="hl-4">bcE</span><span class="hl-1">, </span><span class="hl-4">bDepth</span><span class="hl-1">, </span><span class="hl-4">e</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Use human-friendly outputs:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> [</span><span class="hl-7">lon</span><span class="hl-1">, </span><span class="hl-7">lat</span><span class="hl-1">] = </span><span class="hl-0">toGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-4">c</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">height</span><span class="hl-1"> = -</span><span class="hl-4">cDepth</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lat</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">53.32637826433107</span><span class="hl-1">, </span><span class="hl-8">13</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lon</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">63.46812343514746</span><span class="hl-1">, </span><span class="hl-8">13</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">height</span><span class="hl-1">).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">406.0071960700098</span><span class="hl-1">, </span><span class="hl-8">15</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:example-3-ecef-vector-to-geodetic-latitude" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 3: ECEF-vector to geodetic latitude<a href="#md:example-3-ecef-vector-to-geodetic-latitude" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-03.png" alt="Illustration of example 3"></p>
<blockquote>
<p>Given an ECEF-vector of a position. Find geodetic latitude, longitude and
height (using WGS-84 ellipsoid).</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_3" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_3</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">apply</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">degrees</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fromECEF</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">toGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-4">Vector</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 3: ECEF-vector to geodetic latitude</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given an ECEF-vector of a position. Find geodetic latitude, longitude and</span><br/><span class="hl-5"> * height (using WGS-84 ellipsoid).</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_3</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 3&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Position B is given as an “ECEF-vector” pb (i.e. a vector from E, the</span><br/><span class="hl-1">  </span><span class="hl-5">// center of the Earth, to B, decomposed in E):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">pb</span><span class="hl-1">: </span><span class="hl-9">Vector</span><span class="hl-1"> = </span><span class="hl-0">apply</span><span class="hl-1">((</span><span class="hl-4">n</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">n</span><span class="hl-1"> * </span><span class="hl-8">6371e3</span><span class="hl-1">, [</span><span class="hl-8">0.71</span><span class="hl-1">, -</span><span class="hl-8">0.72</span><span class="hl-1">, </span><span class="hl-8">0.1</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the geodetic latitude, longitude and height, assuming WGS-84</span><br/><span class="hl-1">  </span><span class="hl-5">// ellipsoid.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 1</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// We have a function that converts ECEF-vectors to n-vectors:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> [</span><span class="hl-7">b</span><span class="hl-1">, </span><span class="hl-7">bDepth</span><span class="hl-1">] = </span><span class="hl-0">fromECEF</span><span class="hl-1">(</span><span class="hl-4">pb</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 2</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// Find latitude, longitude and height:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> [</span><span class="hl-7">lon</span><span class="hl-1">, </span><span class="hl-7">lat</span><span class="hl-1">] = </span><span class="hl-0">toGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-4">b</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">height</span><span class="hl-1"> = -</span><span class="hl-4">bDepth</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lat</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">5.685075734513181</span><span class="hl-1">, </span><span class="hl-8">14</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lon</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(-</span><span class="hl-8">45.40066325579215</span><span class="hl-1">, </span><span class="hl-8">14</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">height</span><span class="hl-1">).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">95772.10761821801</span><span class="hl-1">, </span><span class="hl-8">15</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:example-4-geodetic-latitude-to-ecef-vector" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 4: Geodetic latitude to ECEF-vector<a href="#md:example-4-geodetic-latitude-to-ecef-vector" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-04.png" alt="Illustration of example 4"></p>
<blockquote>
<p>Given geodetic latitude, longitude and height. Find the ECEF-vector (using
WGS-84 ellipsoid).</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_4" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_4</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">fromGeodeticCoordinates</span><span class="hl-1">, </span><span class="hl-4">radians</span><span class="hl-1">, </span><span class="hl-4">toECEF</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 4: Geodetic latitude to ECEF-vector</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given geodetic latitude, longitude and height. Find the ECEF-vector (using</span><br/><span class="hl-5"> * WGS-84 ellipsoid).</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_4</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 4&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Geodetic latitude, longitude and height are given for position B:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bLat</span><span class="hl-1"> = </span><span class="hl-8">1</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bLon</span><span class="hl-1"> = </span><span class="hl-8">2</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bHeight</span><span class="hl-1"> = </span><span class="hl-8">3</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the ECEF-vector for this position.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 1: First, the given latitude and longitude are converted to n-vector:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">b</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-4">bLon</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-4">bLat</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Step 2: Convert to an ECEF-vector:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">pb</span><span class="hl-1"> = </span><span class="hl-0">toECEF</span><span class="hl-1">(</span><span class="hl-4">b</span><span class="hl-1">, -</span><span class="hl-4">bHeight</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">pb</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">]).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">6373290.277218279</span><span class="hl-1">, </span><span class="hl-8">8</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">pb</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">]).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">222560.2006747365</span><span class="hl-1">, </span><span class="hl-8">8</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">pb</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">]).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">110568.8271817859</span><span class="hl-1">, </span><span class="hl-8">8</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:example-5-surface-distance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 5: Surface distance<a href="#md:example-5-surface-distance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-05.png" alt="Illustration of example 5"></p>
<blockquote>
<p>Given position <em>A</em> and <em>B</em>. Find the surface <strong>distance</strong> (i.e. great circle
distance) and the Euclidean distance.</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_5" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_5</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">apply</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">cross</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">dot</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fromGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">norm</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">radians</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 5: Surface distance</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given position A and B. Find the surface distance (i.e. great circle</span><br/><span class="hl-5"> * distance) and the Euclidean distance.</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_5</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 5&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Given two positions A and B as n-vectors:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">a</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">0</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">88</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">b</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(-</span><span class="hl-8">170</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">89</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the surface distance (i.e. great circle distance). The heights of A</span><br/><span class="hl-1">  </span><span class="hl-5">// and B are not relevant (i.e. if they do not have zero height, we seek the</span><br/><span class="hl-1">  </span><span class="hl-5">// distance between the points that are at the surface of the Earth, directly</span><br/><span class="hl-1">  </span><span class="hl-5">// above/below A and B). The Euclidean distance (chord length) should also be</span><br/><span class="hl-1">  </span><span class="hl-5">// found.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Use Earth radius r:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">r</span><span class="hl-1"> = </span><span class="hl-8">6371e3</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the great circle distance:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">gcd</span><span class="hl-1"> = </span><span class="hl-4">Math</span><span class="hl-1">.</span><span class="hl-0">atan2</span><span class="hl-1">(</span><span class="hl-0">norm</span><span class="hl-1">(</span><span class="hl-0">cross</span><span class="hl-1">(</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">)), </span><span class="hl-0">dot</span><span class="hl-1">(</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">)) * </span><span class="hl-4">r</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the Euclidean distance:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">ed</span><span class="hl-1"> = </span><span class="hl-0">norm</span><span class="hl-1">(</span><span class="hl-0">apply</span><span class="hl-1">((</span><span class="hl-4">b</span><span class="hl-1">, </span><span class="hl-4">a</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">b</span><span class="hl-1"> - </span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">, </span><span class="hl-4">a</span><span class="hl-1">)) * </span><span class="hl-4">r</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">gcd</span><span class="hl-1">).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">332456.4441053448</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">ed</span><span class="hl-1">).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">332418.7248568097</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:example-6-interpolated-position" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 6: Interpolated position<a href="#md:example-6-interpolated-position" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-06.png" alt="Illustration of example 6"></p>
<blockquote>
<p>Given the position of <em>B</em> at time <em>t<sub>0</sub></em> and <em>t<sub>1</sub></em>. Find an
<strong>interpolated position</strong> at time <em>t<sub>i</sub></em>.</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_6" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_6</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">apply</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">degrees</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fromGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">normalize</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">radians</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">toGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 6: Interpolated position</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given the position of B at time t(0) and t(1). Find an interpolated position</span><br/><span class="hl-5"> * at time t(i).</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_6</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 6&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Given the position of B at time t0 and t1, pt0 and pt1:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">t0</span><span class="hl-1"> = </span><span class="hl-8">10</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">t1</span><span class="hl-1"> = </span><span class="hl-8">20</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">ti</span><span class="hl-1"> = </span><span class="hl-8">16</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">pt0</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(-</span><span class="hl-8">150</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">89.9</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">pt1</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">150</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">89.9</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find an interpolated position at time ti, pti. All positions are given as</span><br/><span class="hl-1">  </span><span class="hl-5">// n-vectors.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Standard interpolation can be used directly with n-vectors:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">pti</span><span class="hl-1"> = </span><span class="hl-0">normalize</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">apply</span><span class="hl-1">((</span><span class="hl-4">pt0</span><span class="hl-1">, </span><span class="hl-4">pt1</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">pt0</span><span class="hl-1"> + ((</span><span class="hl-4">ti</span><span class="hl-1"> - </span><span class="hl-4">t0</span><span class="hl-1">) * (</span><span class="hl-4">pt1</span><span class="hl-1"> - </span><span class="hl-4">pt0</span><span class="hl-1">)) / (</span><span class="hl-4">t1</span><span class="hl-1"> - </span><span class="hl-4">t0</span><span class="hl-1">), </span><span class="hl-4">pt0</span><span class="hl-1">, </span><span class="hl-4">pt1</span><span class="hl-1">),</span><br/><span class="hl-1">  );</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Use human-friendly outputs:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> [</span><span class="hl-7">lon</span><span class="hl-1">, </span><span class="hl-7">lat</span><span class="hl-1">] = </span><span class="hl-0">toGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-4">pti</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lat</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">89.91282199988446</span><span class="hl-1">, </span><span class="hl-8">12</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lon</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">173.4132244463705</span><span class="hl-1">, </span><span class="hl-8">12</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:example-7-mean-positioncenter" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 7: Mean position/center<a href="#md:example-7-mean-positioncenter" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-07.png" alt="Illustration of example 7"></p>
<blockquote>
<p>Given three positions <em>A</em>, <em>B</em>, and <em>C</em>. Find the <strong>mean position</strong>
(center/midpoint).</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_7" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_7</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">apply</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fromGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">normalize</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">radians</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 7: Mean position/center</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given three positions A, B, and C. Find the mean position (center/midpoint).</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_7</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 7&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Three positions A, B, and C are given as n-vectors:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">a</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">0</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">90</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">b</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">10</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">60</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">c</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(-</span><span class="hl-8">20</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">50</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the mean position, M. Note that the calculation is independent of the</span><br/><span class="hl-1">  </span><span class="hl-5">// heights/depths of the positions.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// The mean position is simply given by the mean n-vector:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">m</span><span class="hl-1"> = </span><span class="hl-0">normalize</span><span class="hl-1">(</span><span class="hl-0">apply</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">, </span><span class="hl-4">c</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">a</span><span class="hl-1"> + </span><span class="hl-4">b</span><span class="hl-1"> + </span><span class="hl-4">c</span><span class="hl-1">, </span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">, </span><span class="hl-4">c</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">m</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">]).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">0.3841171702926</span><span class="hl-1">, </span><span class="hl-8">16</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">m</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">]).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(-</span><span class="hl-8">0.04660240548568945</span><span class="hl-1">, </span><span class="hl-8">16</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">m</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">]).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">0.9221074857571395</span><span class="hl-1">, </span><span class="hl-8">16</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:example-8-a-and-azimuthdistance-to-b" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 8: A and azimuth/distance to B<a href="#md:example-8-a-and-azimuthdistance-to-b" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-08.png" alt="Illustration of example 8"></p>
<blockquote>
<p>Given position <em>A</em> and an azimuth/bearing and a (great circle) distance. Find
the <strong>destination point</strong> <em>B</em>.</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_8" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_8</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">Z_AXIS_NORTH</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">apply</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">cross</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">degrees</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fromGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">normalize</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">radians</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">toGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">transform</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">transpose</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 8: A and azimuth/distance to B</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given position A and an azimuth/bearing and a (great circle) distance. Find</span><br/><span class="hl-5"> * the destination point B.</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_8</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 8&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Position A is given as n-vector:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">a</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(-</span><span class="hl-8">90</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">80</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// We also have an initial direction of travel given as an azimuth (bearing)</span><br/><span class="hl-1">  </span><span class="hl-5">// relative to north (clockwise), and finally the distance to travel along a</span><br/><span class="hl-1">  </span><span class="hl-5">// great circle is given:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">azimuth</span><span class="hl-1"> = </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">200</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">gcd</span><span class="hl-1"> = </span><span class="hl-8">1000</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Use Earth radius r:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">r</span><span class="hl-1"> = </span><span class="hl-8">6371e3</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the destination point B.</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// In geodesy, this is known as &quot;The first geodetic problem&quot; or &quot;The direct</span><br/><span class="hl-1">  </span><span class="hl-5">// geodetic problem&quot; for a sphere, and we see that this is similar to Example</span><br/><span class="hl-1">  </span><span class="hl-5">// 2, but now the delta is given as an azimuth and a great circle distance.</span><br/><span class="hl-1">  </span><span class="hl-5">// &quot;The second/inverse geodetic problem&quot; for a sphere is already solved in</span><br/><span class="hl-1">  </span><span class="hl-5">// Examples 1 and 5.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// The azimuth (relative to north) is a singular quantity (undefined at the</span><br/><span class="hl-1">  </span><span class="hl-5">// Poles), but from this angle we can find a (non-singular) quantity that is</span><br/><span class="hl-1">  </span><span class="hl-5">// more convenient when working with vector algebra: a vector d that points in</span><br/><span class="hl-1">  </span><span class="hl-5">// the initial direction. We find this from azimuth by first finding the north</span><br/><span class="hl-1">  </span><span class="hl-5">// and east vectors at the start point, with unit lengths.</span><br/><span class="hl-1">  </span><span class="hl-5">//</span><br/><span class="hl-1">  </span><span class="hl-5">// Here we have assumed that our coordinate frame E has its z-axis along the</span><br/><span class="hl-1">  </span><span class="hl-5">// rotational axis of the Earth, pointing towards the North Pole. Hence, this</span><br/><span class="hl-1">  </span><span class="hl-5">// axis is given by [1, 0, 0]:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">e</span><span class="hl-1"> = </span><span class="hl-0">normalize</span><span class="hl-1">(</span><span class="hl-0">cross</span><span class="hl-1">(</span><span class="hl-0">transform</span><span class="hl-1">(</span><span class="hl-0">transpose</span><span class="hl-1">(</span><span class="hl-7">Z_AXIS_NORTH</span><span class="hl-1">), [</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">0</span><span class="hl-1">, </span><span class="hl-8">0</span><span class="hl-1">]), </span><span class="hl-4">a</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">n</span><span class="hl-1"> = </span><span class="hl-0">cross</span><span class="hl-1">(</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">e</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// The two vectors n and e are horizontal, orthogonal, and span the tangent</span><br/><span class="hl-1">  </span><span class="hl-5">// plane at the initial position. A unit vector d in the direction of the</span><br/><span class="hl-1">  </span><span class="hl-5">// azimuth is now given by:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">d</span><span class="hl-1"> = </span><span class="hl-0">apply</span><span class="hl-1">(</span><br/><span class="hl-1">    (</span><span class="hl-4">n</span><span class="hl-1">, </span><span class="hl-4">e</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">n</span><span class="hl-1"> * </span><span class="hl-4">Math</span><span class="hl-1">.</span><span class="hl-0">cos</span><span class="hl-1">(</span><span class="hl-4">azimuth</span><span class="hl-1">) + </span><span class="hl-4">e</span><span class="hl-1"> * </span><span class="hl-4">Math</span><span class="hl-1">.</span><span class="hl-0">sin</span><span class="hl-1">(</span><span class="hl-4">azimuth</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-4">n</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">e</span><span class="hl-1">,</span><br/><span class="hl-1">  );</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// With the initial direction given as d instead of azimuth, it is now quite</span><br/><span class="hl-1">  </span><span class="hl-5">// simple to find b. We know that d and a are orthogonal, and they will span</span><br/><span class="hl-1">  </span><span class="hl-5">// the plane where b will lie. Thus, we can use sin and cos in the same manner</span><br/><span class="hl-1">  </span><span class="hl-5">// as above, with the angle traveled given by gcd / r:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">b</span><span class="hl-1"> = </span><span class="hl-0">apply</span><span class="hl-1">(</span><br/><span class="hl-1">    (</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">d</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">a</span><span class="hl-1"> * </span><span class="hl-4">Math</span><span class="hl-1">.</span><span class="hl-0">cos</span><span class="hl-1">(</span><span class="hl-4">gcd</span><span class="hl-1"> / </span><span class="hl-4">r</span><span class="hl-1">) + </span><span class="hl-4">d</span><span class="hl-1"> * </span><span class="hl-4">Math</span><span class="hl-1">.</span><span class="hl-0">sin</span><span class="hl-1">(</span><span class="hl-4">gcd</span><span class="hl-1"> / </span><span class="hl-4">r</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-4">a</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">d</span><span class="hl-1">,</span><br/><span class="hl-1">  );</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Use human-friendly outputs:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> [</span><span class="hl-7">lon</span><span class="hl-1">, </span><span class="hl-7">lat</span><span class="hl-1">] = </span><span class="hl-0">toGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-4">b</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lat</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">79.99154867339445</span><span class="hl-1">, </span><span class="hl-8">13</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lon</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(-</span><span class="hl-8">90.01769837291397</span><span class="hl-1">, </span><span class="hl-8">13</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:example-9-intersection-of-two-paths" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 9: Intersection of two paths<a href="#md:example-9-intersection-of-two-paths" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-09.png" alt="Illustration of example 9"></p>
<blockquote>
<p>Given path <em>A</em> going through <em>A<sub>1</sub></em> and <em>A<sub>2</sub></em>, and path <em>B</em>
going through <em>B<sub>1</sub></em> and <em>B<sub>2</sub></em>. Find the <strong>intersection</strong>
of the two paths.</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_9" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_9</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">apply</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">cross</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">degrees</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">dot</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fromGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">normalize</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">radians</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">toGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 9: Intersection of two paths</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given path A going through A(1) and A(2), and path B going through B(1) and</span><br/><span class="hl-5"> * B(2). Find the intersection of the two paths.</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_9</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 9&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Define a path from two given positions (at the surface of a spherical</span><br/><span class="hl-1">  </span><span class="hl-5">// Earth), as the great circle that goes through the two points (assuming that</span><br/><span class="hl-1">  </span><span class="hl-5">// the two positions are not antipodal).</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Path A is given by a1 and a2:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">a1</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">180</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">50</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">a2</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">180</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">90</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// While path B is given by b1 and b2:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">b1</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">160</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">60</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">b2</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(-</span><span class="hl-8">140</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">80</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the position C where the two paths intersect.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// A convenient way to represent a great circle is by its normal vector (i.e.</span><br/><span class="hl-1">  </span><span class="hl-5">// the normal vector to the plane containing the great circle). This normal</span><br/><span class="hl-1">  </span><span class="hl-5">// vector is simply found by taking the cross product of the two n-vectors</span><br/><span class="hl-1">  </span><span class="hl-5">// defining the great circle (path). Having the normal vectors to both paths,</span><br/><span class="hl-1">  </span><span class="hl-5">// the intersection is now simply found by taking the cross product of the two</span><br/><span class="hl-1">  </span><span class="hl-5">// normal vectors:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cTmp</span><span class="hl-1"> = </span><span class="hl-0">normalize</span><span class="hl-1">(</span><span class="hl-0">cross</span><span class="hl-1">(</span><span class="hl-0">cross</span><span class="hl-1">(</span><span class="hl-4">a1</span><span class="hl-1">, </span><span class="hl-4">a2</span><span class="hl-1">), </span><span class="hl-0">cross</span><span class="hl-1">(</span><span class="hl-4">b1</span><span class="hl-1">, </span><span class="hl-4">b2</span><span class="hl-1">)));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Note that there will be two places where the great circles intersect, and</span><br/><span class="hl-1">  </span><span class="hl-5">// thus two solutions are found. Selecting the solution that is closest to</span><br/><span class="hl-1">  </span><span class="hl-5">// e.g. a1 can be achieved by selecting the solution that has a positive dot</span><br/><span class="hl-1">  </span><span class="hl-5">// product with a1 (or the mean position from Example 7 could be used instead</span><br/><span class="hl-1">  </span><span class="hl-5">// of a1):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">c</span><span class="hl-1"> = </span><span class="hl-0">apply</span><span class="hl-1">((</span><span class="hl-4">n</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">Math</span><span class="hl-1">.</span><span class="hl-0">sign</span><span class="hl-1">(</span><span class="hl-0">dot</span><span class="hl-1">(</span><span class="hl-4">cTmp</span><span class="hl-1">, </span><span class="hl-4">a1</span><span class="hl-1">)) * </span><span class="hl-4">n</span><span class="hl-1">, </span><span class="hl-4">cTmp</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Use human-friendly outputs:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> [</span><span class="hl-7">lon</span><span class="hl-1">, </span><span class="hl-7">lat</span><span class="hl-1">] = </span><span class="hl-0">toGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-4">c</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lat</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">74.16344802135536</span><span class="hl-1">, </span><span class="hl-8">16</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-0">degrees</span><span class="hl-1">(</span><span class="hl-4">lon</span><span class="hl-1">)).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">180</span><span class="hl-1">, </span><span class="hl-8">16</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:example-10-cross-track-distance-cross-track-error" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 10: Cross track distance (cross track error)<a href="#md:example-10-cross-track-distance-cross-track-error" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="https://raw.githubusercontent.com/ezzatron/nvector-js/main/assets/img/example-10.png" alt="Illustration of example 10"></p>
<blockquote>
<p>Given path <em>A</em> going through <em>A<sub>1</sub></em> and <em>A<sub>2</sub></em>, and a point
<em>B</em>. Find the <strong>cross track distance</strong>/<strong>cross track error</strong> between <em>B</em> and
the path.</p>
<p><a href="https://www.ffi.no/en/research/n-vector/#example_10" target="_blank" class="external">https://www.ffi.no/en/research/n-vector/#example_10</a></p>
</blockquote>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">cross</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">dot</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fromGeodeticCoordinates</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">normalize</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">radians</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;nvector-geodesy&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">expect</span><span class="hl-1">, </span><span class="hl-4">test</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;vitest&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">/**</span><br/><span class="hl-5"> * Example 10: Cross track distance (cross track error)</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * Given path A going through A(1) and A(2), and a point B. Find the cross track</span><br/><span class="hl-5"> * distance/cross track error between B and the path.</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@see</span><span class="hl-5"> </span><span class="hl-4">https://www.ffi.no/en/research/n-vector/#example_10</span><br/><span class="hl-5"> */</span><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&quot;Example 10&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// PROBLEM:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Path A is given by the two n-vectors a1 and a2 (as in the previous</span><br/><span class="hl-1">  </span><span class="hl-5">// example):</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">a1</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">0</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">0</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">a2</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">0</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">10</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// And a position B is given by b:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">b</span><span class="hl-1"> = </span><span class="hl-0">fromGeodeticCoordinates</span><span class="hl-1">(</span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">0.1</span><span class="hl-1">), </span><span class="hl-0">radians</span><span class="hl-1">(</span><span class="hl-8">1</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the cross track distance between the path A (i.e. the great circle</span><br/><span class="hl-1">  </span><span class="hl-5">// through a1 and a2) and the position B (i.e. the shortest distance at the</span><br/><span class="hl-1">  </span><span class="hl-5">// surface, between the great circle and B). Also, find the Euclidean distance</span><br/><span class="hl-1">  </span><span class="hl-5">// between B and the plane defined by the great circle.</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Use Earth radius r:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">r</span><span class="hl-1"> = </span><span class="hl-8">6371e3</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// SOLUTION:</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// First, find the normal to the great circle, with direction given by the</span><br/><span class="hl-1">  </span><span class="hl-5">// right hand rule and the direction of travel:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">c</span><span class="hl-1"> = </span><span class="hl-0">normalize</span><span class="hl-1">(</span><span class="hl-0">cross</span><span class="hl-1">(</span><span class="hl-4">a1</span><span class="hl-1">, </span><span class="hl-4">a2</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Find the great circle cross track distance:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">gcd</span><span class="hl-1"> = -</span><span class="hl-4">Math</span><span class="hl-1">.</span><span class="hl-0">asin</span><span class="hl-1">(</span><span class="hl-0">dot</span><span class="hl-1">(</span><span class="hl-4">c</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">)) * </span><span class="hl-4">r</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Finding the Euclidean distance is even simpler, since it is the projection</span><br/><span class="hl-1">  </span><span class="hl-5">// of b onto c, thus simply the dot product:</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">ed</span><span class="hl-1"> = -</span><span class="hl-0">dot</span><span class="hl-1">(</span><span class="hl-4">c</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) * </span><span class="hl-4">r</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// For both gcd and ed, positive answers means that B is to the right of the</span><br/><span class="hl-1">  </span><span class="hl-5">// track.</span><br/><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">gcd</span><span class="hl-1">).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">11117.79911014538</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-4">ed</span><span class="hl-1">).</span><span class="hl-0">toBeCloseTo</span><span class="hl-1">(</span><span class="hl-8">11117.79346740667</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:methodology" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Methodology<a href="#md:methodology" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you look at the test suite for this library, you'll see that there are very
few concrete test cases. Instead, this library uses model-based testing, powered
by <a href="https://fast-check.dev/" target="_blank" class="external">fast-check</a>, and using the <a href="https://nvector.readthedocs.io/" target="_blank" class="external">Python nvector library</a> as the &quot;model&quot;, or
reference implementation.</p>
<p>In other words, this library is tested by generating large amounts of &quot;random&quot;
inputs, and then comparing the output with the Python library. This allowed me
to quickly port the library with a high degree of confidence in its correctness,
without a deep understanding of the underlying mathematics.</p>
<p>If you find any issues with the implementations, there's a good chance that the
issue will also be present in the Python library, and an equally good chance
that I won't personally understand how to fix it 😅 Still, don't let that stop
you from opening an issue or a pull request!</p>
<a id="md:references" class="tsd-anchor"></a><h2 class="tsd-anchor-link">References<a href="#md:references" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Gade, K. (2010). <a href="https://www.navlab.net/Publications/A_Nonsingular_Horizontal_Position_Representation.pdf" target="_blank" class="external">A Non-singular Horizontal Position Representation</a>, The
Journal of Navigation, Volume 63, Issue 03, pp 395-417, July 2010.</li>
<li><a href="https://www.ffi.no/en/research/n-vector" target="_blank" class="external">The n-vector page</a></li>
<li>Ellipsoid data taken from <a href="https://github.com/chrisveness/geodesy" target="_blank" class="external">chrisveness/geodesy</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:n-vector"><span>n-<wbr/>vector</span></a><ul><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:examples"><span>Examples</span></a></li><li><ul><li><a href="#md:example-1-a-and-b-to-delta"><span>Example 1: <wbr/>A and <wbr/>B to delta</span></a></li><li><a href="#md:example-2-b-and-delta-to-c"><span>Example 2: <wbr/>B and delta to C</span></a></li><li><a href="#md:example-3-ecef-vector-to-geodetic-latitude"><span>Example 3: ECEF-<wbr/>vector to geodetic latitude</span></a></li><li><a href="#md:example-4-geodetic-latitude-to-ecef-vector"><span>Example 4: <wbr/>Geodetic latitude to ECEF-<wbr/>vector</span></a></li><li><a href="#md:example-5-surface-distance"><span>Example 5: <wbr/>Surface distance</span></a></li><li><a href="#md:example-6-interpolated-position"><span>Example 6: <wbr/>Interpolated position</span></a></li><li><a href="#md:example-7-mean-positioncenter"><span>Example 7: <wbr/>Mean position/center</span></a></li><li><a href="#md:example-8-a-and-azimuthdistance-to-b"><span>Example 8: <wbr/>A and azimuth/distance to B</span></a></li><li><a href="#md:example-9-intersection-of-two-paths"><span>Example 9: <wbr/>Intersection of two paths</span></a></li><li><a href="#md:example-10-cross-track-distance-cross-track-error"><span>Example 10: <wbr/>Cross track distance (cross track error)</span></a></li></ul></li><li><a href="#md:methodology"><span>Methodology</span></a></li><li><a href="#md:references"><span>References</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/ezzatron/nvector-js" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>nvector-geodesy</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
